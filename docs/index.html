<!doctype html>
<meta charset="utf-8" />

<title>&lt;keydown-input&gt;/&lt;keyup-input&gt; examples</title>

<style>
  code {
    background-color: #ddd;
    padding: 3px;
  }

  h2 {
    border-bottom: #999;
  }
</style>

<script type="module">
  import * as ki from "./js/key-input-registerer.js";
  ki.register();
</script>

<h1>Custom element: <code>key-input</code></h1>

<p>Custom elements to input key press events.</p>

<p>
  See
  <a
    href="https://github.com/kui/key-input-elements/blob/master/docs/index.html"
    >this HTML source</a
  >
</p>

<h2>Usages</h2>

<ul>
  <li>
    <label>Simple: <input is="key-input" /></label>
  </li>
  <li>
    <label>
      <code>allow-mod-only</code> bool attribute: Permit keys which is pressed
      with a modifire key
      <br />
      <input is="key-input" allow-mod-only />
    </label>
  </li>
  <li>
    <label>
      <code>strip-mod</code> bool attribute: Strip modifire keys
      <br />
      <input is="key-input" strip-mod />
    </label>
  </li>
  <li>
    <label>
      Enable <code>strip-mod</code> and <code>allow-mod-only</code>
      <br />
      <input is="key-input" strip-mod allow-mod-only />
    </label>
  </li>
  <li>
    <label>
      <code>ignore</code> attribute: Ignore provided pattern. This example
      ignores <code>Tab</code> and <code>KeyA</code>.
      <br />
      <input is="key-input" ignore="( |^)(Tab|KeyA)$" />
    </label>
  </li>
  <li>
    <label>
      <code>multiple</code> attribute: Allow multiple keys
      <br />
      <input is="key-input" multiple />
    </label>
  </li>
  <li>
    <label>
      Enable <code>multiple</code>, <code>strip-mod</code> and
      <code>allow-mod-only</code>
      <br />
      <input is="key-input" multiple strip-mod allow-mod-only />
    </label>
  </li>
</ul>

<h2>Matching KeyboardEvent</h2>

<p>
  <code>EventMatcher</code> is a class to match <code>KeyboardEvent</code> with
  a provided pattern.
</p>

<p>
  Press any key in the following input. If the key matches
  <code>Shift + KeyD</code>, the next display will be <code>true</code> by each
  condition.
</p>

<p>
  <code>key-input</code> element: <input is="key-input" id="keyinput" multiple />
</p>

<ul>
  <li>
    <label>
      <code>historySensitive=ignore</code>:
      Display <code>true</code> if you input <code>Shift + KeyD</code>
      <br />
      <output id="display1"></output>
    </label>
  </li>
  <li>
    <label>
      <code>historySensitive=orderInsensitive</code>(default):
      Display <code>true</code> if you press <code>KeyD</code> with holding down any <code>Shift</code> keys, <code>KeyA</code> and <code>KeyS</code>.
      <br />
      <output id="display2"></output>
    </label>
  </li>
</ul>

<script type="module">
  import { EventMatcher } from "./js/event-matcher.js";
  window.addEventListener("DOMContentLoaded", () => {
    console.log("Setting up 'matching event' example");

    const matcher = EventMatcher.parse("Shift + KeyA + KeyS + KeyD");

    keyinput.addEventListener("keydown", (e) => {
      const m = matcher.keydown(e);
      display1.value = m.match({
        historySensitive: "ignore",
      });
      display2.value = m.match({
        historySensitive: "orderInsensitive",
      });
    });
    keyinput.addEventListener("keyup", (e) => {
      matcher.keyup(e);
    });
  });
</script>
